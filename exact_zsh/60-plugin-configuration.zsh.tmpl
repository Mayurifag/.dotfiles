# There was a problem with pasted text with following whitespaces resulting that
# I can't use backspace or left arrow to navigate, etc.

# This speeds up pasting w/ autosuggest and handles enhancd plugin
# https://github.com/zsh-users/zsh-autosuggestions/issues/238
zsh_paste_enhancd_original_widget_exists=false
if (( $+widgets[enhancd-pre-paste] )); then
  zsh_paste_enhancd_original_widget_exists=true
fi
pasteinit() {
  if $zsh_paste_enhancd_original_widget_exists; then
    zle enhancd-pre-paste
  fi
  OLD_SELF_INSERT=${${(s.:.)widgets[self-insert]}[2,3]}
  zle -N self-insert url-quote-magic
}
pastefinish() {
  zle -N self-insert $OLD_SELF_INSERT
  if $zsh_paste_enhancd_original_widget_exists; then
    zle enhancd-post-paste
  fi
}
zstyle :bracketed-paste-magic paste-init pasteinit
zstyle :bracketed-paste-magic paste-finish pastefinish

# https://github.com/zsh-users/zsh-autosuggestions/issues/351
ZSH_AUTOSUGGEST_CLEAR_WIDGETS+=(bracketed-paste)

#########

# Antidote plugins are now nicer to read
# https-COLON--SLASH--SLASH-github.com-SLASH-zsh-users-SLASH-zsh-autosuggestions becomes zsh-users__zsh-autosuggestions.
zstyle ':antidote:bundle' use-friendly-names 'yes'

#########

# AI section

export GEMINI_API_KEY="{{ (joinPath .chezmoi.sourceDir "keys.ejson" | ejsonDecrypt).gemini_api_key }}"
export ZSH_AI_PROVIDER="gemini"

#########

# eza universal Dracula

export EZA_COLORS="\
uu=36:\
uR=31:\
un=35:\
gu=37:\
da=2;34:\
ur=34:\
uw=95:\
ux=36:\
ue=36:\
gr=34:\
gw=35:\
gx=36:\
tr=34:\
tw=35:\
tx=36:\
xx=95:"
